---
import { client } from '../data/client';
interface Props { title?: string; description?: string; }
const { title = client.titreSEO, description = client.descriptionSEO } = Astro.props;
---
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title}</title>
  <meta name="description" content={description} />
  <meta name="keywords" content={client.motsCles} />
  <meta name="robots" content="index, follow" />
  <meta property="og:type" content="website" /><meta property="og:title" content={title} /><meta property="og:description" content={description} /><meta property="og:locale" content="fr_FR" />
  <link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Nunito+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context":"https://schema.org","@type":"HealthAndBeautyBusiness",
    "name":client.nom,"description":client.descriptionSEO,
    "telephone":client.telephoneLink.replace("tel:",""),"email":client.email,
    "address":{"@type":"PostalAddress","streetAddress":client.adresse.split(",")[0],"addressLocality":client.ville,"postalCode":"66000","addressCountry":"FR"}
  })} />
</head>
<body>
  <slot />

  {client.cookieConsent && (
    <div class="cookie-banner" id="cookieBanner">
      <div class="cookie-inner">
        <p>üç™ Ce site utilise des cookies techniques pour am√©liorer votre exp√©rience. <a href="/mentions-legales">En savoir plus</a></p>
        <div class="cookie-actions">
          <button class="cookie-accept" id="cookieAccept">Accepter</button>
          <button class="cookie-refuse" id="cookieRefuse">Refuser</button>
        </div>
      </div>
    </div>
  )}

  <style is:global>
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    html{scroll-behavior:smooth;scroll-padding-top:80px;}
    body{font-family:'Nunito Sans',sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;overflow-x:hidden;font-weight:400;}
    ::selection{background:rgba(124,58,237,0.1);}
    img{max-width:100%;display:block;} a{color:inherit;text-decoration:none;}

    :root{
      --violet:#7C3AED;--violet-dark:#6D28D9;--violet-light:#8B5CF6;--violet-pale:#C4B5FD;--violet-glow:rgba(124,58,237,0.06);--violet-glow-strong:rgba(124,58,237,0.12);
      --rose:#EC4899;--rose-pale:#FBCFE8;--rose-glow:rgba(236,72,153,0.06);
      --bg:#FAF9FE;--bg-alt:#F3F0FA;--bg-card:#FFFFFF;--bg-dark:#1E1136;
      --border:rgba(124,58,237,0.08);--border-strong:rgba(124,58,237,0.15);
      --text:#3B2D4F;--text-muted:#7C6F93;--text-light:#A99BBF;
      --white:#FFFEFF;
      --radius-soft:20px;--radius-round:9999px;
      --font-display:'Cormorant Garamond',serif;
    }

    .font-display{font-family:var(--font-display);}
    .container{max-width:1080px;margin:0 auto;padding:0 clamp(1rem,4vw,2.5rem);}
    .section{padding:clamp(4rem,8vw,7rem) 0;}
    .section-alt{background:var(--bg-alt);}
    .section-dark{background:var(--bg-dark);color:rgba(255,255,255,0.8);}
    .text-violet{color:var(--violet);}
    .text-rose{color:var(--rose);}

    /* Social links */
    .social-links{display:flex;gap:10px;align-items:center;}
    .social-link{display:flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:14px;background:var(--violet-glow);border:1px solid var(--border);color:var(--violet-light);transition:all 0.4s cubic-bezier(0.16,1,0.3,1);}
    .social-link:hover{background:var(--violet);color:#fff;border-color:var(--violet);transform:translateY(-4px) scale(1.05);box-shadow:0 8px 24px rgba(124,58,237,0.2);}
    .social-link-dark{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.08);color:rgba(255,255,255,0.4);}
    .social-link-dark:hover{background:var(--violet);color:#fff;border-color:var(--violet);}

    /* Animations */
    .reveal{opacity:0;transform:translateY(30px);transition:opacity 0.9s cubic-bezier(0.16,1,0.3,1),transform 0.9s cubic-bezier(0.16,1,0.3,1);will-change:transform,opacity;}
    .reveal.visible{opacity:1;transform:translateY(0);}
    .reveal-d1{transition-delay:0.12s;}.reveal-d2{transition-delay:0.24s;}.reveal-d3{transition-delay:0.36s;}.reveal-d4{transition-delay:0.48s;}.reveal-d5{transition-delay:0.6s;}
    .slide-left{opacity:0;transform:translateX(-40px);transition:opacity 0.9s cubic-bezier(0.16,1,0.3,1),transform 0.9s cubic-bezier(0.16,1,0.3,1);}
    .slide-left.visible{opacity:1;transform:translateX(0);}
    .slide-right{opacity:0;transform:translateX(40px);transition:opacity 0.9s cubic-bezier(0.16,1,0.3,1),transform 0.9s cubic-bezier(0.16,1,0.3,1);}
    .slide-right.visible{opacity:1;transform:translateX(0);}
    .blur-sharp{opacity:0;filter:blur(10px);transform:scale(1.03);transition:opacity 1s ease,filter 1s ease,transform 1s ease;}
    .blur-sharp.visible{opacity:1;filter:blur(0);transform:scale(1);}
    .clip-reveal{clip-path:inset(0 100% 0 0);transition:clip-path 1.2s cubic-bezier(0.16,1,0.3,1);}
    .clip-reveal.visible{clip-path:inset(0 0 0 0);}
    .hover-lift{transition:transform 0.5s cubic-bezier(0.16,1,0.3,1),box-shadow 0.5s;}
    .hover-lift:hover{transform:translateY(-8px);box-shadow:0 20px 60px rgba(124,58,237,0.08);}
    .img-zoom{overflow:hidden;border-radius:inherit;} .img-zoom img{transition:transform 0.7s cubic-bezier(0.16,1,0.3,1);} .img-zoom:hover img{transform:scale(1.06);}

    @keyframes kenBurns{0%{transform:scale(1);}50%{transform:scale(1.08) translate(-1%,-1%);}100%{transform:scale(1);}}
    .ken-burns img{animation:kenBurns 24s ease-in-out infinite;}
    @keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}
    .float{animation:float 6s ease-in-out infinite;}
    @keyframes fadeSlideIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
    @keyframes breathe{0%,100%{opacity:0.4;transform:scale(1);}50%{opacity:0.7;transform:scale(1.05);}}
    .breathe{animation:breathe 5s ease-in-out infinite;}

    /* Cookie */
    .cookie-banner{position:fixed;bottom:0;left:0;right:0;z-index:9999;padding:16px;background:var(--bg-dark);color:rgba(255,255,255,0.7);transform:translateY(0);transition:transform 0.5s;}
    .cookie-banner.hidden{transform:translateY(120%);}
    .cookie-inner{max-width:1080px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap;}
    .cookie-inner p{font-size:13px;line-height:1.6;flex:1;min-width:200px;} .cookie-inner a{color:var(--violet-pale);text-decoration:underline;}
    .cookie-actions{display:flex;gap:8px;}
    .cookie-accept{padding:9px 22px;border-radius:var(--radius-round);border:none;background:var(--violet);color:#fff;font-weight:600;font-size:13px;cursor:pointer;transition:all 0.3s;}
    .cookie-accept:hover{background:var(--violet-light);}
    .cookie-refuse{padding:9px 22px;border-radius:var(--radius-round);border:1px solid rgba(255,255,255,0.12);background:transparent;color:rgba(255,255,255,0.4);font-size:13px;cursor:pointer;}

    @media(prefers-reduced-motion:reduce){
      .reveal,.slide-left,.slide-right,.blur-sharp,.clip-reveal{opacity:1!important;transform:none!important;filter:none!important;clip-path:none!important;transition:none!important;}
      .ken-burns img,.float,.breathe{animation:none!important;}
    }
  </style>

  <script>
    const obs=new IntersectionObserver(e=>e.forEach(x=>{if(x.isIntersecting)x.target.classList.add('visible')}),{threshold:0.08,rootMargin:'0px 0px -40px 0px'});
    document.querySelectorAll('.reveal,.slide-left,.slide-right,.blur-sharp,.clip-reveal').forEach(el=>obs.observe(el));
    const nav=document.getElementById('navbar');window.addEventListener('scroll',()=>nav?.classList.toggle('scrolled',window.scrollY>40),{passive:true});
    const bg=document.getElementById('burger'),mm=document.getElementById('mobile-menu');bg?.addEventListener('click',()=>{bg.classList.toggle('open');mm?.classList.toggle('open');});mm?.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>{bg?.classList.remove('open');mm?.classList.remove('open');}));
    const cb=document.getElementById('cookieBanner');
    if(cb && localStorage.getItem('cookies-choice')){cb.classList.add('hidden');}
    document.getElementById('cookieAccept')?.addEventListener('click',()=>{localStorage.setItem('cookies-choice','accepted');cb?.classList.add('hidden');});
    document.getElementById('cookieRefuse')?.addEventListener('click',()=>{localStorage.setItem('cookies-choice','refused');cb?.classList.add('hidden');});
  </script>
</body>
</html>
