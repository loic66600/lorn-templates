---
// ══════════════════════════════════════════════════════════════
// PAGE — NOTRE HISTOIRE / À PROPOS
// DÉSACTIVABLE : mv src/pages/a-propos.astro src/pages-off/a-propos.astro
// Puis retirer le lien "Notre histoire" de la navbar dans index.astro
// ══════════════════════════════════════════════════════════════
import Layout from '../layouts/Layout.astro';
import { client } from '../data/client';
const a = client.apropos;
const socials = Object.entries(client.reseaux).filter(([_,v]) => v);
const socialIcons: Record<string,string> = {
  facebook:'<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>',
  instagram:'<svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="5"/><circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" stroke="none"/></svg>',
  tripadvisor:'<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>',
};
---

<Layout title={`Notre histoire — ${client.nom}`}>
  <div class="page-top"><div class="container" style="display:flex;justify-content:space-between;align-items:center;"><a href="/" class="back-link">← Retour</a><span class="font-display" style="font-weight:700;color:var(--wine);font-size:15px;">{client.nom}</span></div></div>

  <!-- Histoire -->
  <section class="section">
    <div class="container about-split">
      <div class="about-text reveal">
        <span class="section-deco">✦</span>
        <span class="about-tag">{a.sousTitre}</span>
        <h1 class="font-display">{a.titre}</h1>
        <p>{a.paragraphe1}</p>
        <p>{a.paragraphe2}</p>
        {socials.length > 0 && (
          <div class="social-links" style="margin-top:20px;">
            {socials.map(([k,v]) => (
              <a href={v} target="_blank" rel="noopener" class="social-link" title={k} set:html={socialIcons[k] || k} />
            ))}
          </div>
        )}
      </div>
      <div class="about-images">
        <div class="about-img-main">
          <img src={a.image} alt={a.imageAlt} loading="eager" />
        </div>
        <div class="about-right-col">
          <div class="about-chef-badge">
            <div class="chef-badge-photo">
              <img src={a.image} alt={a.imageAlt} loading="lazy" />
            </div>
            <strong>{a.chef}</strong>
            <small>{a.chefTitre}</small>
          </div>
          <div class="about-img-sec">
            <img src={a.ambiance} alt={a.ambianceAlt} loading="lazy" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Équipe -->
  <section class="section">
    <div class="container">
      <div style="text-align:center;margin-bottom:48px;">
        <span class="section-deco">✦</span>
        <h2 class="font-display section-title-sm reveal">Notre <em class="text-wine">équipe</em></h2>
        <p class="team-sub reveal reveal-d1">Des passionnés au service de votre plaisir</p>
      </div>
      <div class="team-grid">
        {a.equipe.map((m, i) => (
          <div class={`team-card hover-lift reveal ${i > 0 ? `reveal-d${Math.min(i,3)}` : ''}`}>
            <div class="team-photo">
              <img src={m.image} alt={m.nom} loading="lazy" />
            </div>
            <div class="team-info">
              <strong>{m.nom}</strong>
              <span>{m.poste}</span>
              <p>{m.description}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Valeurs -->
  <section class="section section-alt">
    <div class="container">
      <div style="text-align:center;margin-bottom:40px;">
        <span class="section-deco">✦</span>
        <h2 class="font-display section-title-sm reveal">Nos <em class="text-wine">engagements</em></h2>
      </div>
      <div class="val-grid">
        {a.valeurs.map((v, i) => (
          <div class={`val-card hover-lift reveal ${i > 0 ? `reveal-d${i}` : ''}`}>
            <span class="val-icon">{v.icone}</span>
            <h3>{v.titre}</h3>
            <p>{v.description}</p>
          </div>
        ))}
      </div>
      <div style="text-align:center;margin-top:48px;" class="reveal">
        <a href="/#reservation" class="btn-primary btn-lg">Réserver une table →</a>
      </div>
    </div>
  </section>
</Layout>

<style>
  .page-top{padding:100px 0 0;} .back-link{color:var(--wine);font-size:14px;font-weight:500;}
  .section-deco{display:block;font-size:14px;color:var(--gold-light);margin-bottom:8px;}
  .about-split{display:grid;grid-template-columns:1fr 1fr;gap:48px;align-items:center;}
  .about-tag{display:block;font-size:12px;color:var(--gold-light);letter-spacing:0.15em;text-transform:uppercase;font-weight:600;margin-bottom:6px;}
  .about-text h1{font-size:clamp(1.8rem,4vw,2.6rem);font-weight:800;color:var(--text);line-height:1.15;margin-bottom:20px;}
  .about-text p{font-size:15px;color:var(--text-muted);line-height:1.9;margin-bottom:12px;}
  .about-images{display:grid;grid-template-columns:1fr 160px;gap:14px;align-items:stretch;}
  .about-img-main{border-radius:20px;overflow:hidden;}
  .about-img-main img{width:100%;height:100%;min-height:420px;object-fit:cover;object-position:center;display:block;}
  .about-right-col{display:flex;flex-direction:column;gap:14px;}
  .about-chef-badge{flex-shrink:0;padding:16px 12px;border-radius:16px;background:var(--bg-card);border:1px solid var(--border-light);box-shadow:0 8px 28px rgba(0,0,0,0.06);text-align:center;}
  .chef-badge-photo{width:72px;height:72px;border-radius:50%;overflow:hidden;margin:0 auto 10px;border:3px solid var(--wine);box-shadow:0 4px 12px rgba(127,29,29,0.2);}
  .chef-badge-photo img{width:100%;height:100%;object-fit:cover;object-position:top;display:block;}
  .about-chef-badge strong{display:block;font-size:12px;color:var(--wine);font-weight:700;line-height:1.3;} .about-chef-badge small{font-size:10px;color:var(--text-muted);line-height:1.4;display:block;margin-top:3px;}
  .about-img-sec{flex:1;border-radius:16px;overflow:hidden;min-height:0;}
  .about-img-sec img{width:100%;height:100%;object-fit:cover;display:block;}
  .section-title-sm{font-size:clamp(1.6rem,3vw,2.2rem);font-weight:800;color:var(--text);line-height:1.12;} .section-title-sm em{font-style:italic;}
  .team-sub{font-size:15px;color:var(--text-muted);margin-top:6px;}
  .team-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;}
  .team-card{border-radius:20px;overflow:hidden;background:var(--bg-card);border:1px solid var(--border-light);transition:transform 0.4s,box-shadow 0.4s;}
  .team-photo{aspect-ratio:3/4;overflow:hidden;}
  .team-photo img{width:100%;height:100%;object-fit:cover;object-position:top;display:block;transition:transform 0.5s;}
  .team-card:hover .team-photo img{transform:scale(1.05);}
  .team-info{padding:18px 16px;}
  .team-info strong{display:block;font-size:15px;font-weight:700;color:var(--text);margin-bottom:2px;}
  .team-info span{display:block;font-size:11px;text-transform:uppercase;letter-spacing:0.1em;color:var(--wine);font-weight:600;margin-bottom:8px;}
  .team-info p{font-size:13px;color:var(--text-muted);line-height:1.6;margin:0;}
  .val-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;}
  .val-card{padding:24px;border-radius:16px;background:var(--bg-card);border:1px solid var(--border-light);text-align:center;transition:transform 0.4s,box-shadow 0.4s;}
  .val-icon{font-size:32px;display:block;margin-bottom:10px;}
  .val-card h3{font-size:16px;font-weight:700;color:var(--text);margin-bottom:6px;}
  .val-card p{font-size:13px;color:var(--text-muted);line-height:1.6;}
  .btn-primary{display:inline-flex;align-items:center;gap:8px;padding:15px 32px;border-radius:12px;background:var(--wine);color:#fff;font-weight:600;font-size:15px;border:none;cursor:pointer;transition:all 0.3s;} .btn-primary:hover{background:var(--wine-dark);transform:translateY(-2px);} .btn-lg{padding:18px 40px;font-size:16px;}
  @media(max-width:768px){.about-split{grid-template-columns:1fr;gap:32px;}.about-images{grid-template-columns:1fr;}.about-img-main img{min-height:280px;}.about-right-col{flex-direction:row;}.about-chef-badge{flex:0 0 140px;}.about-img-sec{flex:1;min-height:160px;}.val-grid{grid-template-columns:1fr 1fr;}.team-grid{grid-template-columns:1fr 1fr;}}
  @media(max-width:480px){.about-right-col{flex-direction:column;}.about-chef-badge{flex:none;}.val-grid{grid-template-columns:1fr;}.team-grid{grid-template-columns:1fr 1fr;}}
  @media(max-width:480px){.val-grid{grid-template-columns:1fr;}}
</style>
